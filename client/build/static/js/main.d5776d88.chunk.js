(this["webpackJsonpchat-app-front"]=this["webpackJsonpchat-app-front"]||[]).push([[0],{210:function(e,t,a){e.exports=a(385)},382:function(e,t){},385:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),l=a.n(c),u=a(22),s=a(59),o=a(23),i=a.n(o),m=a(50),E=a(113),d=a.n(E),f={getAll:function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/messages");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addNewMessage:function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/messages",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(){return function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getAll();case 2:a=e.sent,t({type:"INIT_MESSAGES",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_MESSAGES":return t.data;case"NEW_MESSAGE":return e.concat(t.data);default:return e}},g=a(402),v=a(396),b=a(401),S={addMessage:function(e){return function(){var t=Object(m.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.addNewMessage(e);case 2:n=t.sent,a({type:"NEW_MESSAGE",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},O=Object(u.b)((function(e){return{socket:e.socket}}),S)((function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(""),o=Object(s.a)(u,2),i=o[0],m=o[1];return r.a.createElement("div",null,r.a.createElement(g.a,{as:"h3"},"Send message:"),r.a.createElement(v.a,{onSubmit:function(t){t.preventDefault();var a={message:c,timeStamp:new Date,user:i};e.socket.send(a),e.addMessage(a),l(""),m("")}},r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Field,{width:11},r.a.createElement("label",null,"Message"),r.a.createElement(v.a.Input,{value:c,onChange:function(e){var t=e.target;return l(t.value)},placeholder:"Add a message..."})),r.a.createElement(v.a.Field,{width:5},r.a.createElement("label",null,"Sent by"),r.a.createElement(v.a.Input,{value:i,onChange:function(e){var t=e.target;return m(t.value)},placeholder:"Anonymous by default"}))),r.a.createElement(b.a,{type:"submit"},"Send")))})),C=a(398),j=a(405),k=a(403),w=a(393),y=function(e){var t=e.message,a=e.messageAvatar;return r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(C.a.Avatar,{src:a}),r.a.createElement(C.a.Content,null,r.a.createElement(j.a,{as:k.a,basic:!0,floated:"right",minWidth:400},r.a.createElement(C.a.Metadata,null,new Date(t.timeStamp).toLocaleString())),r.a.createElement(j.a,{as:k.a,basic:!0,floated:"right",minWidth:350,maxWidth:399},r.a.createElement(C.a.Metadata,null,new Date(t.timeStamp).toDateString())),r.a.createElement(C.a.Author,null,t.user),r.a.createElement(C.a.Text,null,t.message))),r.a.createElement(w.a,null))},M=a(404),A=a(399),x=a(394),N=a(400),T=Object(u.b)((function(e){return{messages:e.messages,socket:e.socket}}))((function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),c=a[0],l=a[1],u=e.socket;Object(n.useEffect)((function(){null!==u&&u.on("clientCount",(function(e){l(e)}))}),[u]);var o=["ade","chris","christian","daniel","elliot","helen","jenny","joe","justen","laura"];return r.a.createElement(k.a,null,r.a.createElement(C.a.Group,{style:{maxWidth:"100%"}},r.a.createElement(M.a,{columns:"equal"},r.a.createElement(M.a.Column,null,r.a.createElement(g.a,{as:"h2"},"Chat",r.a.createElement(g.a.Subheader,null,"Showing previous messages and real time"))),r.a.createElement(M.a.Column,{textAlign:"right"},null===u?"":"Currently connected users: ".concat(c))),r.a.createElement(w.a,null),0===e.messages.length?r.a.createElement(A.a.Dimmable,null,r.a.createElement(A.a,{inverted:!0,active:!0},r.a.createElement(x.a,{inverted:!0},"Loading")),r.a.createElement(N.a,{fluid:!0},r.a.createElement(N.a.Header,{image:!0},r.a.createElement(N.a.Line,null),r.a.createElement(N.a.Line,null)),r.a.createElement(N.a.Header,{image:!0},r.a.createElement(N.a.Line,null),r.a.createElement(N.a.Line,null)))):e.messages.map((function(e){return r.a.createElement(y,{key:e.id,message:e,messageAvatar:"https://semantic-ui.com/images/avatar/large/".concat(o[Math.floor(Math.random()*o.length)],".jpg")})}))))})),D=a(197),I=a.n(D),_=function(){return{type:"CONNECT_SOCKET"}},W=function(){return{type:"DISCONNECT_SOCKET"}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONNECT_SOCKET":var a=I()("https://incredible-chatapp.herokuapp.com/");return a;case"DISCONNECT_SOCKET":return e.off(),e.close(),null;default:return e}},L={connect:_,disconnect:W,refreshMessages:p},K=Object(u.b)((function(e){return{socket:e.socket}}),L)((function(e){var t=e.socket;return Object(n.useEffect)((function(){null!==t&&t.on("message",(function(){e.refreshMessages()}))}),[t]),r.a.createElement("div",null," ",null===t?r.a.createElement("div",null,r.a.createElement("p",null,"Disconnected from the server"),r.a.createElement(b.a,{onClick:e.connect},"Connect")):r.a.createElement("div",null,r.a.createElement("p",null,"Connected to the server"),r.a.createElement(b.a,{onClick:e.disconnect},"Disconnect")))})),F=a(395),H={connect:_,disconnect:W,initMessages:p},J=Object(u.b)((function(e){return{socket:e.socket}}),H)((function(e){return Object(n.useEffect)((function(){e.initMessages()}),[]),r.a.createElement(F.a,null,r.a.createElement(g.a,{as:"h1",textAlign:"center"},"Chat App",r.a.createElement(g.a.Subheader,null,"Welcome! Connect to chat to start!")),r.a.createElement(T,null),null===e.socket?null:r.a.createElement("div",null,r.a.createElement(O,null),r.a.createElement(w.a,null)),r.a.createElement(K,null))})),q=a(49),B=a(198),z=Object(q.c)({messages:h,socket:G}),P=Object(q.d)(z,Object(q.a)(B.a));l.a.render(r.a.createElement(u.a,{store:P},r.a.createElement(J,null)),document.getElementById("root"))}},[[210,1,2]]]);
//# sourceMappingURL=main.d5776d88.chunk.js.map